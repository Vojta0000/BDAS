<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="upce.javafx.AdminViewController">
    <!-- Sidebar with navigation -->
    <left>
        <VBox styleClass="sidebar" prefWidth="200.0" spacing="5"
              style="-fx-background-color: #2c3e50; -fx-padding: 10;">

            <Label text="BankIS" style="-fx-text-fill: white; -fx-font-size: 24px; -fx-font-weight: bold;">
                <VBox.margin>
                    <Insets bottom="20"/>
                </VBox.margin>
            </Label>

            <Button text="Branches" onAction="#showBranches" maxWidth="Infinity"
                    style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>
            <Button text="Clients" onAction="#showClients" maxWidth="Infinity"
                    style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>
            <Button text="Tellers" onAction="#showTellers" maxWidth="Infinity"
                    style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>
            <Button text="Users" onAction="#showUsers" maxWidth="Infinity"
                    style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>
            <Button text="Accounts" onAction="#showAccounts" maxWidth="Infinity"
                    style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>
            <Button text="Transactions" onAction="#showTransactions" maxWidth="Infinity"
                    style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>
            <Button text="Logins" onAction="#showLogins" maxWidth="Infinity"
                    style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>
            <Button text="Messages" onAction="#showMessages" maxWidth="Infinity"
                    style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>
            <Button text="Audit logs" onAction="#showAudits" maxWidth="Infinity"
                    style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>

            <!-- Additional master data tables -->
            <Button text="Roles" onAction="#showRoles" maxWidth="Infinity"
                    style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>
            <Button text="Addresses" onAction="#showAddresses" maxWidth="Infinity"
                    style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>
            <Button text="Transaction types" onAction="#showTransactionTypes" maxWidth="Infinity"
                    style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>
            <Button text="Documents" onAction="#showDocuments" maxWidth="Infinity"
                    style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>

            <Region VBox.vgrow="ALWAYS" />

            <Button text="Logout" onAction="#onLogout" maxWidth="Infinity"
                    style="-fx-background-color: #c0392b; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>
        </VBox>
    </left>

    <center>
        <StackPane fx:id="contentStack" style="-fx-background-color: #ecf0f1; -fx-padding: 16;">
            <!-- Branches section -->
            <VBox fx:id="branchesSection" spacing="8" visible="false" managed="false">
                <HBox spacing="8">
                    <TextField fx:id="branchSearchField" promptText="Search branch name (prefix)" />
                    <Button text="Search" onAction="#reloadBranches" />
                    <Button text="Add" onAction="#onAddBranch" />
                </HBox>
                <TableView fx:id="branchesTable" VBox.vgrow="ALWAYS"/>
            </VBox>

            <!-- Users section -->
            <VBox fx:id="usersSection" spacing="8" visible="false" managed="false">
                <HBox spacing="8">
                    <TextField fx:id="userNameSearchField" promptText="Name (prefix)" />
                    <TextField fx:id="userSurnameSearchField" promptText="Surname (prefix)" />
                    <Button text="Search" onAction="#reloadUsers" />
                    <Button text="Add" onAction="#onAddUser" />
                </HBox>
                <TableView fx:id="usersTable" VBox.vgrow="ALWAYS"/>
            </VBox>

            <!-- Placeholders for other sections -->
            <VBox fx:id="clientsSection" spacing="8" visible="false" managed="false">
                <HBox spacing="8">
                    <TextField fx:id="clientNameSearchField" promptText="Name (prefix)" />
                    <TextField fx:id="clientSurnameSearchField" promptText="Surname (prefix)" />
                    <Button text="Search" onAction="#reloadClients" />
                    <Button text="Add" onAction="#onAddClient" />
                </HBox>
                <TableView fx:id="clientsTable" VBox.vgrow="ALWAYS"/>
            </VBox>

            <VBox fx:id="tellersSection" spacing="8" visible="false" managed="false">
                <HBox spacing="8">
                    <TextField fx:id="tellerNameSearchField" promptText="Name (prefix)" />
                    <TextField fx:id="tellerSurnameSearchField" promptText="Surname (prefix)" />
                    <Button text="Search" onAction="#reloadTellers" />
                    <Button text="Add" onAction="#onAddTeller" />
                </HBox>
                <TableView fx:id="tellersTable" VBox.vgrow="ALWAYS"/>
            </VBox>

            <VBox fx:id="accountsSection" spacing="8" visible="false" managed="false">
                <!-- Row 1: filters only -->
                <HBox spacing="8">
                    <TextField fx:id="accountOwnerNameField" promptText="Owner name (prefix)" />
                    <TextField fx:id="accountOwnerSurnameField" promptText="Owner surname (prefix)" />
                    <TextField fx:id="accountNumberSearchField" promptText="Account number (prefix)" />
                </HBox>
                <!-- Row 2: actions (search/apply + add) -->
                <HBox spacing="8">
                    <Region HBox.hgrow="ALWAYS" />
                    <Button text="Search" onAction="#reloadAccounts" />
                    <Button text="Add" onAction="#onAddAccount" />
                </HBox>
                <TableView fx:id="accountsTable" VBox.vgrow="ALWAYS"/>
            </VBox>

            <VBox fx:id="transactionsSection" spacing="8" visible="false" managed="false">
                <!-- Row 1: filters only -->
                <HBox spacing="8">
                    <TextField fx:id="transactionAccountSearchField" promptText="Account number (prefix)" />
                    <ComboBox fx:id="transactionTypeFilter" promptText="Type" />
                    <ComboBox fx:id="transactionDirectionFilter" promptText="Direction (All/Incoming/Outgoing)" />
                    <TextField fx:id="amountMinField" promptText="Amount min" />
                    <TextField fx:id="amountMaxField" promptText="Amount max" />
                    <DatePicker fx:id="dateFromPicker" promptText="Date from" />
                    <DatePicker fx:id="dateToPicker" promptText="Date to" />
                </HBox>
                <!-- Row 2: actions (apply + add) -->
                <HBox spacing="8">
                    <Region HBox.hgrow="ALWAYS" />
                    <Button text="Apply" onAction="#reloadTransactions" />
                    <Button text="Add" onAction="#onAddTransaction" />
                </HBox>
                <TableView fx:id="transactionsTable" VBox.vgrow="ALWAYS"/>
            </VBox>

            <VBox fx:id="loginsSection" spacing="8" visible="false" managed="false">
                <TableView fx:id="loginsTable" VBox.vgrow="ALWAYS"/>
            </VBox>

            <VBox fx:id="messagesSection" spacing="8" visible="false" managed="false">
                <!-- Row 1: filters -->
                <HBox spacing="8">
                    <TextField fx:id="messageUserSearchField" promptText="User name/surname (prefix)" />
                    <DatePicker fx:id="messageDateFromPicker" promptText="Date from" />
                    <DatePicker fx:id="messageDateToPicker" promptText="Date to" />
                </HBox>
                <!-- Row 2: actions -->
                <HBox spacing="8">
                    <Region HBox.hgrow="ALWAYS" />
                    <Button text="Apply" onAction="#reloadMessages" />
                    <Button text="Add" onAction="#onAddMessage" />
                </HBox>
                <TableView fx:id="messagesTable" VBox.vgrow="ALWAYS"/>
            </VBox>

            <VBox fx:id="auditsSection" spacing="8" visible="false" managed="false">
                <TableView fx:id="auditsTable" VBox.vgrow="ALWAYS"/>
            </VBox>

            <!-- Roles section -->
            <VBox fx:id="rolesSection" spacing="8" visible="false" managed="false">
                <HBox spacing="8">
                    <Button text="Add" onAction="#onAddRole" />
                </HBox>
                <TableView fx:id="rolesTable" VBox.vgrow="ALWAYS"/>
            </VBox>

            <!-- Addresses section -->
            <VBox fx:id="addressesSection" spacing="8" visible="false" managed="false">
                <HBox spacing="8">
                    <Button text="Add" onAction="#onAddAddress" />
                </HBox>
                <TableView fx:id="addressesTable" VBox.vgrow="ALWAYS"/>
            </VBox>

            <!-- Transaction Types section -->
            <VBox fx:id="transactionTypesSection" spacing="8" visible="false" managed="false">
                <HBox spacing="8">
                    <Button text="Add" onAction="#onAddTransactionType" />
                </HBox>
                <TableView fx:id="transactionTypesTable" VBox.vgrow="ALWAYS"/>
            </VBox>

            <!-- Documents section (read-only metadata + delete) -->
            <VBox fx:id="documentsSection" spacing="8" visible="false" managed="false">
                <TableView fx:id="documentsTable" VBox.vgrow="ALWAYS"/>
            </VBox>
        </StackPane>
    </center>
</BorderPane>
