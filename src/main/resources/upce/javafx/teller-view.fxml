<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<!-- Teller view follows the same visual style as client-view.fxml: left dark sidebar, main content on the right -->
<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="upce.javafx.TellerViewController" prefHeight="600.0" prefWidth="900.0">

    <!-- LEFT SIDEBAR -->
    <left>
        <VBox styleClass="sidebar" prefWidth="200.0" spacing="5"
              style="-fx-background-color: #2c3e50; -fx-padding: 10;">

            <Label text="BankIS" style="-fx-text-fill: white; -fx-font-size: 24px; -fx-font-weight: bold;">
                <VBox.margin>
                    <Insets bottom="20"/>
                </VBox.margin>
            </Label>

            <!-- Profile Tab -->
            <Button fx:id="profileButton" text="Profile" maxWidth="Infinity"
                    style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>

            <!-- Clients Tab (Expandable) -->
            <Button fx:id="clientsButton" text="â–º Clients" maxWidth="Infinity" style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>
            <VBox fx:id="clientsSubMenu" visible="false" managed="false" style="-fx-padding: 0 0 0 20;"/>
            <Button fx:id="clientsOverviewButton" text="My Clients Overview" maxWidth="Infinity" style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>
            <Button fx:id="notificationsButton" text="Notifications" maxWidth="Infinity" style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>

            <Button fx:id="registerNewUserButton" text="New client" maxWidth="Infinity"
                    style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;">
            </Button>

            <Button fx:id="pendingRequestsButton" text="Pending requests" maxWidth="Infinity"
                    style="-fx-background-color: #8e44ad; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;">
            </Button>

            <!-- Pushes the logout button to the bottom -->
            <Region VBox.vgrow="ALWAYS" />

            <!-- Stop Emulating (visible only when admin emulates) -->
            <Button fx:id="stopEmulateButton" text="Stop Emulating" maxWidth="Infinity"
                    visible="false" managed="false"
                    onAction="#onStopEmulate"
                    style="-fx-background-color: #8e44ad; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;"/>

            <Button fx:id="logoutButton" text="Log out" maxWidth="Infinity"
                    style="-fx-background-color: #c0392b; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 10;">
            </Button>

        </VBox>
    </left>

    <!-- MAIN CONTENT AREA -->
    <center>
        <VBox fx:id="contentArea" HBox.hgrow="ALWAYS" style="-fx-background-color: #ecf0f1; -fx-padding: 20;">

            <!-- PROFILE SECTION -->
            <VBox fx:id="profileSection" spacing="20">
                <Label text="Teller Profile" style="-fx-font-size: 28px; -fx-font-weight: bold;"/>

                <GridPane hgap="20" vgap="15" style="-fx-padding: 20; -fx-background-color: white; -fx-background-radius: 5;">
                    <Label text="Name:" GridPane.columnIndex="0" GridPane.rowIndex="0"
                           style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                    <TextField fx:id="nameField" GridPane.columnIndex="1" GridPane.rowIndex="0"
                               editable="false" promptText="Name"/>

                    <Label text="Surname:" GridPane.columnIndex="0" GridPane.rowIndex="1"
                           style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                    <TextField fx:id="surnameField" GridPane.columnIndex="1" GridPane.rowIndex="1"
                               editable="false" promptText="Surname"/>

                    <Label text="Phone Number:" GridPane.columnIndex="0" GridPane.rowIndex="2"
                           style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                    <TextField fx:id="phoneField" GridPane.columnIndex="1" GridPane.rowIndex="2"
                               editable="false" promptText="Phone Number"/>

                    <Label text="Email Address:" GridPane.columnIndex="0" GridPane.rowIndex="3"
                           style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                    <TextField fx:id="emailField" GridPane.columnIndex="1" GridPane.rowIndex="3"
                               editable="false" promptText="Email Address"/>

                    <columnConstraints>
                        <ColumnConstraints minWidth="150" prefWidth="150"/>
                        <ColumnConstraints minWidth="300" prefWidth="300"/>
                    </columnConstraints>
                </GridPane>
            </VBox>

            <!-- CLIENTS SECTION: list of clients on the left is in the sidebar; selecting one shows details here -->
            <VBox fx:id="clientDetailSection" spacing="20" visible="false">
                <Label fx:id="clientHeader" text="Client Details" style="-fx-font-size: 28px; -fx-font-weight: bold;"/>

                <VBox spacing="15" style="-fx-padding: 20; -fx-background-color: white; -fx-background-radius: 5;">
                    <!-- Basic client info -->
                    <GridPane hgap="15" vgap="10">
                        <Label text="Client Name:" GridPane.columnIndex="0" GridPane.rowIndex="0" style="-fx-font-weight: bold;"/>
                        <Label fx:id="clientNameLabel" text="" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                        <Label text="Client ID:" GridPane.columnIndex="0" GridPane.rowIndex="1" style="-fx-font-weight: bold;"/>
                        <Label fx:id="clientIdLabel" text="" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                        <columnConstraints>
                            <ColumnConstraints minWidth="120" prefWidth="120"/>
                            <ColumnConstraints minWidth="300" prefWidth="300"/>
                        </columnConstraints>
                    </GridPane>

                    <Separator/>

                    <!-- Accounts list for the selected client -->
                    <Label text="Accounts" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                    <VBox fx:id="clientAccountsContainer" spacing="10">
                        <!-- Example account entries (replace/populate dynamically) -->
                        <HBox spacing="10">
                            <Button text="Account 123456/0100" fx:id="sampleAccountBtn1"
                                    style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-padding: 6 12;"/>
                            <Label text="Balance: $5,000.00" style="-fx-text-fill: #27ae60; -fx-font-weight: bold;"/>
                        </HBox>
                        <HBox spacing="10">
                            <Button text="Account 987654/0100" fx:id="sampleAccountBtn2"
                                    style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-padding: 6 12;"/>
                            <Label text="Balance: $1,250.40" style="-fx-text-fill: #27ae60; -fx-font-weight: bold;"/>
                        </HBox>
                    </VBox>

                    <Separator/>

                    <HBox spacing="10">
                        <Button fx:id="openClientChatButton" text="Chat"
                                style="-fx-background-color: #5dade2; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 8 20;"/>
                        <Button fx:id="openClientDocsButton" text="Documents"
                                style="-fx-background-color: #e67e22; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 8 20;"/>
                        <Button fx:id="createAccountButton" text="Create Account"
                                style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 8 20;"/>
                    </HBox>
                </VBox>
            </VBox>

            <!-- ACCOUNT DETAIL SECTION: shows selected account info and last 5 transactions -->
            <VBox fx:id="accountDetailSection" spacing="20" visible="false">
                <Label fx:id="accountHeader" text="Account Details" style="-fx-font-size: 28px; -fx-font-weight: bold;"/>

                <VBox spacing="15" style="-fx-padding: 20; -fx-background-color: white; -fx-background-radius: 5;">
                    <GridPane hgap="20" vgap="10">
                        <Label text="Account Number:" GridPane.columnIndex="0" GridPane.rowIndex="0" style="-fx-font-weight: bold;"/>
                        <Label fx:id="accountNumberLabel" text="" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                        <Label text="Balance:" GridPane.columnIndex="0" GridPane.rowIndex="1" style="-fx-font-weight: bold;"/>
                        <Label fx:id="accountBalanceLabel" text="" GridPane.columnIndex="1" GridPane.rowIndex="1" style="-fx-text-fill: #27ae60; -fx-font-weight: bold;"/>

                        <Label text="Currency:" GridPane.columnIndex="0" GridPane.rowIndex="2" style="-fx-font-weight: bold;"/>
                        <Label fx:id="accountCurrencyLabel" text="" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                        <columnConstraints>
                            <ColumnConstraints minWidth="150" prefWidth="150"/>
                            <ColumnConstraints minWidth="300" prefWidth="300"/>
                        </columnConstraints>
                    </GridPane>

                    <Separator/>

                    <Label text="Last 5 Transactions" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                    <TableView fx:id="transactionsTable" prefHeight="200">
                        <columns>
                            <TableColumn fx:id="dateColumn" text="Date" prefWidth="120"/>
                            <TableColumn fx:id="descriptionColumn" text="Description" prefWidth="280"/>
                            <TableColumn fx:id="amountColumn" text="Amount" prefWidth="120"/>
                        </columns>
                    </TableView>

                    <HBox spacing="10">
                        <Button fx:id="backToClientButton" text="Back to Client"
                                style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-padding: 8 20;"/>
                        <Button fx:id="historyButton" text="Full History"
                                style="-fx-background-color: #8e44ad; -fx-text-fill: white; -fx-padding: 8 20;"/>
                    </HBox>
                </VBox>
            </VBox>

            <!-- CLIENT DOCUMENTS SECTION (New) -->
            <VBox fx:id="clientDocumentsSection" spacing="20" visible="false" managed="false">
                <Label fx:id="clientDocsHeader" text="Client Documents" style="-fx-font-size: 28px; -fx-font-weight: bold;"/>

                <VBox spacing="15" style="-fx-padding: 20; -fx-background-color: white; -fx-background-radius: 5;" VBox.vgrow="ALWAYS">
                    <!-- Drop Area -->
                    <StackPane fx:id="fileDropArea" prefHeight="150" style="-fx-border-color: #bdc3c7; -fx-border-style: dashed; -fx-border-width: 2; -fx-background-color: #f9f9f9;">
                        <Label text="Drag and drop files here to upload for client" style="-fx-text-fill: #7f8c8d; -fx-font-size: 16px;"/>
                    </StackPane>

                    <Label text="Saved Files" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

                    <ListView fx:id="documentsListView" VBox.vgrow="ALWAYS"/>

                    <HBox spacing="10">
                        <Button fx:id="backToClientFromDocsButton" text="Back to Client"
                                style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-padding: 8 20;"/>
                    </HBox>
                </VBox>
            </VBox>

            <!-- CLIENT CHAT SECTION: chat with the selected client (with input) -->
            <VBox fx:id="clientChatSection" spacing="20" visible="false">
                <Label fx:id="clientChatHeader" text="Chat with Client" style="-fx-font-size: 28px; -fx-font-weight: bold;"/>

                <VBox spacing="10" VBox.vgrow="ALWAYS"
                      style="-fx-background-color: white; -fx-background-radius: 5; -fx-padding: 15;">

                    <!-- Chat Messages Area -->
                    <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS"
                                style="-fx-background-color: white; -fx-background: white;">
                        <VBox fx:id="clientChatMessagesContainer" spacing="10" style="-fx-padding: 10;">
                            <!-- Messages will be populated here -->
                        </VBox>
                    </ScrollPane>

                    <Separator/>

                    <!-- Message Input Area -->
                    <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding-top: 10;">
                        <TextField fx:id="clientMessageInput" promptText="Type your message..."
                                   HBox.hgrow="ALWAYS" style="-fx-font-size: 14px; -fx-padding: 8;"/>
                        <Button fx:id="sendClientMessageButton" text="Send"
                                style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 8 20;"/>
                        <Button fx:id="backToClientFromChatButton" text="Back"
                                style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 8 20;"/>
                    </HBox>
                </VBox>
            </VBox>

            <!-- NOTIFICATIONS SECTION: chat-like feed without the option to write messages -->
            <VBox fx:id="notificationsSection" spacing="20" visible="false">
                <Label text="Notifications" style="-fx-font-size: 28px; -fx-font-weight: bold;"/>

                <VBox spacing="10" VBox.vgrow="ALWAYS"
                      style="-fx-background-color: white; -fx-background-radius: 5; -fx-padding: 15;">

                    <!-- Feed Area (messages only, no input) -->
                    <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS"
                                style="-fx-background-color: white; -fx-background: white;">
                        <VBox fx:id="notificationsMessagesContainer" spacing="10" style="-fx-padding: 10;">
                            <!-- Example notifications/messages -->
                            <HBox alignment="CENTER_LEFT">
                                <VBox spacing="5" style="-fx-background-color: #e8f4f8; -fx-background-radius: 10; -fx-padding: 10; -fx-max-width: 420;">
                                    <Label text="System" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: #7f8c8d;"/>
                                    <Label text="New client assigned: Client 1" wrapText="true" style="-fx-font-size: 14px;"/>
                                    <Label text="09:10" style="-fx-font-size: 10px; -fx-text-fill: #95a5a6;"/>
                                </VBox>
                            </HBox>
                            <HBox alignment="CENTER_LEFT">
                                <VBox spacing="5" style="-fx-background-color: #e8f4f8; -fx-background-radius: 10; -fx-padding: 10; -fx-max-width: 420;">
                                    <Label text="System" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: #7f8c8d;"/>
                                    <Label text="Client 2 updated contact info" wrapText="true" style="-fx-font-size: 14px;"/>
                                    <Label text="09:25" style="-fx-font-size: 10px; -fx-text-fill: #95a5a6;"/>
                                </VBox>
                            </HBox>
                        </VBox>
                    </ScrollPane>
                </VBox>
            </VBox>

            <!-- REGISTER NEW CLIENT SECTION -->
            <VBox fx:id="registerClientSection" spacing="20" visible="false" managed="false">
                <Label text="Register New Client" style="-fx-font-size: 28px; -fx-font-weight: bold;"/>

                <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
                    <VBox spacing="15" style="-fx-padding: 20; -fx-background-color: white; -fx-background-radius: 5;">
                        <Label text="Personal Information" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

                        <GridPane vgap="10" hgap="10">
                            <Label text="Name:" GridPane.columnIndex="0" GridPane.rowIndex="0" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="regNameField" GridPane.columnIndex="1" GridPane.rowIndex="0" promptText="First Name"/>

                            <Label text="Surname:" GridPane.columnIndex="0" GridPane.rowIndex="1" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="regSurnameField" GridPane.columnIndex="1" GridPane.rowIndex="1" promptText="Last Name"/>

                            <Label text="Birth Number:" GridPane.columnIndex="0" GridPane.rowIndex="2" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="regBirthNumberField" GridPane.columnIndex="1" GridPane.rowIndex="2" promptText="YYMMDD/XXXX"/>

                            <Label text="Phone:" GridPane.columnIndex="0" GridPane.rowIndex="3" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="regPhoneField" GridPane.columnIndex="1" GridPane.rowIndex="3" promptText="+420..."/>

                            <Label text="Email:" GridPane.columnIndex="0" GridPane.rowIndex="4" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="regEmailField" GridPane.columnIndex="1" GridPane.rowIndex="4" promptText="email@example.com"/>

                            <Label text="Password:" GridPane.columnIndex="0" GridPane.rowIndex="5" style="-fx-font-weight: bold;"/>
                            <PasswordField fx:id="regPasswordField" GridPane.columnIndex="1" GridPane.rowIndex="5" promptText="Initial Password"/>

                            <columnConstraints>
                                <ColumnConstraints minWidth="120" />
                                <ColumnConstraints hgrow="ALWAYS" />
                            </columnConstraints>
                        </GridPane>

                        <Separator/>
                        <Label text="Address" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

                        <GridPane vgap="10" hgap="10">
                            <Label text="Street:" GridPane.columnIndex="0" GridPane.rowIndex="0" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="regStreetField" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                            <Label text="House No:" GridPane.columnIndex="0" GridPane.rowIndex="1" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="regHouseNumberField" GridPane.columnIndex="1" GridPane.rowIndex="1" prefWidth="80"/>

                            <Label text="City:" GridPane.columnIndex="0" GridPane.rowIndex="2" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="regCityField" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                            <Label text="ZIP Code:" GridPane.columnIndex="0" GridPane.rowIndex="3" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="regZipField" GridPane.columnIndex="1" GridPane.rowIndex="3"/>

                            <Label text="Country:" GridPane.columnIndex="0" GridPane.rowIndex="4" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="regCountryField" GridPane.columnIndex="1" GridPane.rowIndex="4" text="Czechia"/>

                            <columnConstraints>
                                <ColumnConstraints minWidth="120" />
                                <ColumnConstraints hgrow="ALWAYS" />
                            </columnConstraints>
                        </GridPane>

                        <HBox spacing="15" alignment="CENTER_RIGHT" style="-fx-padding: 20 0 0 0;">
                            <Button fx:id="confirmRegistrationButton" text="Register Client"
                                    style="-fx-background-color: #2ecc71; -fx-text-fill: white; -fx-padding: 10 20; -fx-font-weight: bold;"/>
                        </HBox>
                    </VBox>
                </ScrollPane>
            </VBox>

            <!-- PENDING REQUESTS SECTION -->
            <VBox fx:id="pendingRequestsSection" spacing="20" visible="false" managed="false">
                <Label text="Pending Registrations" style="-fx-font-size: 28px; -fx-font-weight: bold;"/>
                <TableView fx:id="pendingTable" VBox.vgrow="ALWAYS"/>
            </VBox>
            <VBox fx:id="clientsOverviewSection" visible="false" managed="false" spacing="15">
                <Label text="My Clients Financial Overview" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                <TableView fx:id="clientsOverviewTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="overviewNameCol" text="Client Name" prefWidth="200"/>
                        <TableColumn fx:id="overviewAccountCol" text="Account Number" prefWidth="200"/>
                        <TableColumn fx:id="overviewTotalCol" text="Total Received" prefWidth="200"/>
                    </columns>
                </TableView>
            </VBox>

        </VBox>
    </center>

</BorderPane>
